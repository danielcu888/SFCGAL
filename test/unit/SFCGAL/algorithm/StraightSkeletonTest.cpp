/**
 *   SFCGAL
 *
 *   Copyright (C) 2012-2013 Oslandia <infos@oslandia.com>
 *   Copyright (C) 2012-2013 IGN (http://www.ign.fr)
 *
 *   This library is free software; you can redistribute it and/or
 *   modify it under the terms of the GNU Library General Public
 *   License as published by the Free Software Foundation; either
 *   version 2 of the License, or (at your option) any later version.
 *
 *   This library is distributed in the hope that it will be useful,
 *   but WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *   Library General Public License for more details.

 *   You should have received a copy of the GNU Library General Public
 *   License along with this library; if not, see <http://www.gnu.org/licenses/>.
 */
#include <boost/test/unit_test.hpp>

#include <SFCGAL/Kernel.h>
#include <SFCGAL/Point.h>
#include <SFCGAL/LineString.h>
#include <SFCGAL/Polygon.h>
#include <SFCGAL/Triangle.h>
#include <SFCGAL/PolyhedralSurface.h>
#include <SFCGAL/TriangulatedSurface.h>
#include <SFCGAL/Solid.h>
#include <SFCGAL/GeometryCollection.h>
#include <SFCGAL/MultiPoint.h>
#include <SFCGAL/MultiLineString.h>
#include <SFCGAL/MultiPolygon.h>
#include <SFCGAL/MultiSolid.h>
#include <SFCGAL/io/wkt.h>
#include <SFCGAL/algorithm/straightSkeleton.h>
#include <SFCGAL/algorithm/covers.h>

#include <SFCGAL/detail/tools/Registry.h>

using namespace boost::unit_test ;
using namespace SFCGAL ;

BOOST_AUTO_TEST_SUITE( SFCGAL_algorithm_StraightSkeletonTest )


BOOST_AUTO_TEST_CASE( testTriangle )
{
    std::unique_ptr< Geometry > g( io::readWkt( "TRIANGLE((1 1,2 1,2 2,1 1))" ) );

    std::string expectedWKT( "MULTILINESTRING((1.0 1.0,1.7 1.3),(2.0 1.0,1.7 1.3),(2.0 2.0,1.7 1.3))" );
    {
        std::unique_ptr< MultiLineString > result( algorithm::straightSkeleton( *g ) ) ;
        BOOST_CHECK_EQUAL( result->numGeometries(), 3U );
        BOOST_CHECK_EQUAL( result->asText( 1 ), expectedWKT );
    }
    // check orientation insensitive
    {
        g->as< Triangle >().reverse() ;
        std::unique_ptr< MultiLineString > result( algorithm::straightSkeleton( *g ) ) ;
        BOOST_CHECK_EQUAL( result->numGeometries(), 3U );
        BOOST_CHECK_EQUAL( result->asText( 1 ), expectedWKT );
    }
}


BOOST_AUTO_TEST_CASE( testPolygon )
{
    std::unique_ptr< Geometry > g( io::readWkt( "POLYGON((1 1,11 1,11 11,1 11,1 1))" ) );

    std::string expectedWKT( "MULTILINESTRING((1 1,6 6),(11 1,6 6),(11 11,6 6),(1 11,6 6))" );
    {
        std::unique_ptr< MultiLineString > result( algorithm::straightSkeleton( *g ) ) ;
        BOOST_CHECK_EQUAL( result->numGeometries(), 4U );
        BOOST_CHECK_EQUAL( result->asText( 0 ), expectedWKT );
    }
    // check orientation insensitive
    {
        g->as< Polygon >().exteriorRing().reverse() ;
        std::unique_ptr< MultiLineString > result( algorithm::straightSkeleton( *g ) ) ;
        BOOST_CHECK_EQUAL( result->numGeometries(), 4U );
        BOOST_CHECK_EQUAL( result->asText( 0 ), expectedWKT );
    }
}

BOOST_AUTO_TEST_CASE( testPolygonWithHole )
{
    std::unique_ptr< Geometry > g( io::readWkt( "POLYGON( (-1.0 -1.0,1.0 -1.0,1.0 1.0,-1.0 1.0,-1.0 -1.0)"
                                                       ", (-0.5 -0.5,-0.5 0.5,0.5 0.5,-0.5 -0.5)"
                                                       ")"
                                              )
                                 );

    std::unique_ptr< MultiLineString > result( algorithm::straightSkeleton( *g ) ) ;
    BOOST_CHECK_EQUAL( result->numGeometries(), 13 );

    std::unique_ptr< Geometry > expected( io::readWkt( "MULTILINESTRING( (-1/1 -1/1,-3/4 -3/4)"
                                                                      ", (1/1 -1/1,1865452045155277/4503599627370496 -3730904090310553/9007199254740992)"
                                                                      ", (1/1 1/1,3/4 3/4)"
                                                                      ", (-1/1 1/1,-3/4 3/4)"
                                                                      ", (-1/2 -1/2,-5822673418478105/9007199254740992 -7688125463633383/9007199254740992)"
                                                                      ", (-1/2 1/2,-3/4 3/4)"
                                                                      ", (1/2 1/2,3844062731816691/4503599627370496 727834177309763/1125899906842624)"
                                                                      ", (-5822673418478105/9007199254740992 -7688125463633383/9007199254740992,1865452045155277/4503599627370496 -3730904090310553/9007199254740992)"
                                                                      ", (-5822673418478105/9007199254740992 -7688125463633383/9007199254740992,-3/4 -3/4)"
                                                                      ", (3844062731816691/4503599627370496 727834177309763/1125899906842624,3/4 3/4)"
                                                                      ", (3844062731816691/4503599627370496 727834177309763/1125899906842624,1865452045155277/4503599627370496 -3730904090310553/9007199254740992)"
                                                                      ", (-3/4 3/4,3/4 3/4)"
                                                                      ", (-3/4 3/4,-3/4 -3/4)"
                                                                      ")"
                                                     )
                                        );

    BOOST_CHECK( algorithm::covers( *result, *expected ) );
}

BOOST_AUTO_TEST_CASE( testPolygonWithHoleTouchingShell )
{
    std::unique_ptr< Geometry > g( io::readWkt( "POLYGON((-1.0 -1.0,1.0 -1.0,1.0 1.0,-1.0 1.0,-1.0 -1.0),(-0.5 -0.5,-0.5 0.5,0.5 0.5,1.0 -0.5,-0.5 -0.5))" ) );
    BOOST_CHECK_THROW( algorithm::straightSkeleton( *g ), NotImplementedException );
}

BOOST_AUTO_TEST_CASE( testPolygonWithTouchingHoles )
{
    std::unique_ptr< Geometry > g( io::readWkt( "POLYGON((-1.0 -1.0,1.0 -1.0,1.0 1.0,-1.0 1.0,-1.0 -1.0),(-0.5 -0.5,-0.5 0.5,-0.1 0.5,0.1 -0.5,-0.5 -0.5),(0.1 -0.5,0.1 0.5,0.5 0.5,0.5 -0.5,0.1 -0.5))" ) );

    BOOST_CHECK_THROW( algorithm::straightSkeleton( *g ), NotImplementedException );

}

BOOST_AUTO_TEST_CASE( testMultiPolygon )
{
    std::unique_ptr< Geometry > g( io::readWkt( "MULTIPOLYGON(((3.000000 0.000000,2.875000 0.484123,2.750000 0.661438,2.625000 0.780625,2.500000 0.866025,2.375000 0.927025,2.250000 0.968246,2.125000 0.992157,2.000000 1.000000,1.875000 1.484123,1.750000 1.661438,1.625000 1.780625,1.500000 1.866025,1.375000 1.927025,1.250000 1.968246,1.125000 1.992157,1.000000 2.000000,0.750000 2.661438,0.500000 2.866025,0.250000 2.968246,0.000000 3.000000,-0.250000 2.968246,-0.500000 2.866025,-0.750000 2.661438,-1.000000 2.000000,-1.125000 1.992157,-1.250000 1.968246,-1.375000 1.927025,-1.500000 1.866025,-1.625000 1.780625,-1.750000 1.661438,-1.875000 1.484123,-2.000000 1.000000,-2.125000 0.992157,-2.250000 0.968246,-2.375000 0.927025,-2.500000 0.866025,-2.625000 0.780625,-2.750000 0.661438,-2.875000 0.484123,-3.000000 0.000000,-2.875000 -0.484123,-2.750000 -0.661438,-2.625000 -0.780625,-2.500000 -0.866025,-2.375000 -0.927025,-2.250000 -0.968246,-2.125000 -0.992157,-2.000000 -1.000000,-1.875000 -1.484123,-1.750000 -1.661438,-1.625000 -1.780625,-1.500000 -1.866025,-1.375000 -1.927025,-1.250000 -1.968246,-1.125000 -1.992157,-1.000000 -2.000000,-0.750000 -2.661438,-0.500000 -2.866025,-0.250000 -2.968246,0.000000 -3.000000,0.250000 -2.968246,0.500000 -2.866025,0.750000 -2.661438,1.000000 -2.000000,1.125000 -1.992157,1.250000 -1.968246,1.375000 -1.927025,1.500000 -1.866025,1.625000 -1.780625,1.750000 -1.661438,1.875000 -1.484123,2.000000 -1.000000,2.125000 -0.992157,2.250000 -0.968246,2.375000 -0.927025,2.500000 -0.866025,2.625000 -0.780625,2.750000 -0.661438,2.875000 -0.484123,3.000000 0.000000),(0.000000 1.000000,0.125000 0.515877,0.250000 0.338562,0.375000 0.219375,0.500000 0.133975,0.625000 0.072975,0.750000 0.031754,0.875000 0.007843,1.000000 0.000000,0.875000 -0.007843,0.750000 -0.031754,0.625000 -0.072975,0.500000 -0.133975,0.375000 -0.219375,0.250000 -0.338562,0.125000 -0.515877,0.000000 -1.000000,-0.125000 -0.515877,-0.250000 -0.338562,-0.375000 -0.219375,-0.500000 -0.133975,-0.625000 -0.072975,-0.750000 -0.031754,-0.875000 -0.007843,-1.000000 0.000000,-0.875000 0.007843,-0.750000 0.031754,-0.625000 0.072975,-0.500000 0.133975,-0.375000 0.219375,-0.250000 0.338562,-0.125000 0.515877,0.000000 1.000000)))" ) );
    std::unique_ptr< MultiLineString > result( algorithm::straightSkeleton( *g ) ) ;
    BOOST_CHECK_EQUAL( result->numGeometries(), 220U );
}


BOOST_AUTO_TEST_CASE( testInvalidTypes )
{
    std::vector< std::string > wkt;
    wkt.push_back( "POINT(1 2)" );
    wkt.push_back( "LINESTRING(0 0,1 1)" );

    for ( std::vector< std::string >::const_iterator it=wkt.begin(),
                                                     itE=wkt.end();
          it != itE; ++it )
    {
      std::unique_ptr< Geometry > g( io::readWkt( *it ) );
      std::unique_ptr< MultiLineString > result(
          algorithm::straightSkeleton( *g )
      );
      BOOST_CHECK_EQUAL( result->numGeometries(), 0U );
    }
}

// See https://github.com/Oslandia/SFCGAL/issues/75
BOOST_AUTO_TEST_CASE( testPostgisIssue3107 )
{
    std::unique_ptr< Geometry > g( io::readWkt( "POLYGON((1347259.25 7184745.94,1347273.17 7184758.16,1347280.39 7184749.95,1347278.04 7184747.88,1347281.66 7184743.76,1347284.01 7184745.83,1347293.5 7184735.05,1347279.61 7184722.85,1347269.29 7184734.6,1347270.35 7184735.51,1347267.31 7184738.96,1347266.22 7184738.01,1347259.25 7184745.94),(1347267.31 7184738.96,1347269.31 7184736.7,1347272.57 7184739.55,1347270.56 7184741.83,1347267.31 7184738.96))" ) );
    BOOST_CHECK_THROW( algorithm::straightSkeleton( *g ), NotImplementedException );
}

// See https://github.com/Oslandia/SFCGAL/issues/91
BOOST_AUTO_TEST_CASE( testMultiPolygonWithTouchingHoles )
{
    std::unique_ptr< Geometry > g( io::readWkt( "MULTIPOLYGON(((1347259.25 7184745.94,1347273.17 7184758.16,1347280.39 7184749.95,1347278.04 7184747.88,1347281.66 7184743.76,1347284.01 7184745.83,1347293.5 7184735.05,1347279.61 7184722.85,1347269.29 7184734.6,1347270.35 7184735.51,1347267.31 7184738.96,1347266.22 7184738.01,1347259.25 7184745.94),(1347267.31 7184738.96,1347269.31 7184736.7,1347272.57 7184739.55,1347270.56 7184741.83,1347267.31 7184738.96)))" ) );
    BOOST_CHECK_THROW( algorithm::straightSkeleton( *g ), NotImplementedException );
}

BOOST_AUTO_TEST_CASE( testDistanceInM )
{
    std::unique_ptr< Geometry > g( io::readWkt( "POLYGON((0 0,1 0,1 1,0 1,0 0))" ) );
    std::unique_ptr<Geometry> out( algorithm::straightSkeleton( *g, /* autoOrientation */ true, /* innerOnly */ false, /* outputDistanceInM */ true ) );
    std::string expectedWKT( "MULTILINESTRING M((-0.0 -0.0 0.0,0.5 0.5 0.5),(1.0 -0.0 0.0,0.5 0.5 0.5),(1.0 1.0 0.0,0.5 0.5 0.5),(-0.0 1.0 0.0,0.5 0.5 0.5))" );
    BOOST_CHECK_EQUAL( out->asText( 1 ), expectedWKT );
}

BOOST_AUTO_TEST_CASE( testMultiEmptyEmpty )
{
    std::unique_ptr< Geometry > g( io::readWkt( "MULTIPOLYGON(EMPTY,EMPTY)" ) );
    std::unique_ptr<Geometry> out( algorithm::straightSkeleton( *g ) );
    std::string expectedWKT( "MULTILINESTRING EMPTY" );
    BOOST_CHECK_EQUAL( out->asText( 1 ), expectedWKT );
}

BOOST_AUTO_TEST_CASE( testIssue96 )
{
    std::unique_ptr< Geometry > g
        = io::readWkt(
            "POLYGON((1684000.000000 5402672.31399816,"
            "1683946.034501 5402654.436405,"
            "1683891.240865 5402626.55208,"
            "1683828.852807 5402603.566759,"
            "1683763.966259 5402588.179891,"
            "1683710.005454 5402593.368835,"
            "1683643.321311 5402617.6139,"
            "1683558.455081 5402667.62372,"
            "1683479.657793 5402723.692308,"
            "1683393.274328 5402782.790279,"
            "1683344.780518 5402828.261023,"
            "1683302.347403 5402879.780536,"
            "1683275.07015 5402920.702207,"
            "1683275.07015 5402961.61388,"
            "1683285.674306 5403005.564933,"
            "1683312.951559 5403060.123828,"
            "1683325.081196 5403107.104265,"
            "1683319.0205 5403163.172853,"
            "1683291.735002 5403213.182673,"
            "1683214.454949 5403316.231698,"
            "1683131.097709 5403404.133806,"
            "1683071.999743 5403438.986712,"
            "1682985.616278 5403446.565169,"
            "1682940.462035 5403442.675961,"
            "1682880.415797 5403428.688808,"
            "1682817.343333 5403380.938527,"
            "1682774.09388 5403321.470632,"
            "1682729.94563 5403243.986403,"
            "1682692.10545 5403159.283644,"
            "1682682.878351 5403080.789622,"
            "1682680.67671 5403039.198087,"
            "1682654.257025 5402965.563076,"
            "1682628.876316 5402937.928701,"
            "1682608.979094 5402917.832791,"
            "1682537.124807 5402882.669948,"
            "1682377.221394 5402803.686025,"
            "1682327.432986 5402778.391174,"
            "1682247.745147 5402720.312996,"
            "1682225.349434 5402712.624561,"
            "1682183.51002 5402714.684141,"
            "1682145.917216 5402727.481536,"
            "1682113.964569 5402740.648856,"
            "1682089.985654 5402764.224058,"
            "1682069.700877 5402801.616447,"
            "1682051.708445 5402871.502221,"
            "1682004.624674 5402975.481057,"
            "1681970.354945 5403065.972638,"
            "1681952.560413 5403113.362991,"
            "1681928.037272 5403171.901076,"
            "1681920.830404 5403207.043923,"
            "1681928.936069 5403248.485488,"
            "1681963.684057 5403315.911763,"
            "1681985.700461 5403387.247243,"
            "1681982.097027 5403427.788991,"
            "1681972.696765 5403453.58374,"
            "1681959.998165 5403485.977147,"
            "1681917.119774 5403543.165506,"
            "1681871.734647 5403590.355901,"
            "1681801.356366 5403642.355317,"
            "1681698.275067 5403702.603053,"
            "1681626.709384 5403743.754677,"
            "1681565.82207 5403762.980764,"
            "1681486.530031 5403783.696547,"
            "1681395.528893 5403795.414162,"
            "1681308.13119 5403794.514345,"
            "1681281.134295 5403807.881624,"
            "1681309.029987 5403814.330312,"
            "1681347.777209 5403821.538844,"
            "1681443.280578 5403812.530678,"
            "1681535.188758 5403799.913246,"
            "1681627.995736 5403769.279482,"
            "1681693.294577 5403734.146633,"
            "1681743.478785 5403709.551639,"
            "1681819.010719 5403658.462038,"
            "1681882.981979 5403607.092494,"
            "1681939.746371 5403555.732948,"
            "1681968.582088 5403515.1912,"
            "1681992.008532 5403477.348903,"
            "1682001.920037 5403427.788991,"
            "1682003.725877 5403371.030544,"
            "1681981.181738 5403316.111723,"
            "1681950.564919 5403242.18677,"
            "1681946.961485 5403179.109609,"
            "1682053.819381 5402931.490011,"
            "1682074.706105 5402867.003137,"
            "1682087.000658 5402829.21083,"
            "1682109.882876 5402779.320985,"
            "1682132.47649 5402759.525014,"
            "1682162.573821 5402744.718028,"
            "1682197.659889 5402742.418496,"
            "1682230.057811 5402752.7164,"
            "1682274.948187 5402775.501762,"
            "1682361.422357 5402825.011685,"
            "1682456.810283 5402864.263695,"
            "1682563.989768 5402917.532852,"
            "1682603.784212 5402945.227215,"
            "1682636.380035 5402982.409647,"
            "1682648.855997 5403036.748586,"
            "1682663.269733 5403154.78456,"
            "1682694.397795 5403228.449566,"
            "1682727.240993 5403287.227602,"
            "1682756.07671 5403341.296596,"
            "1682792.11105 5403388.14706,"
            "1682830.858272 5403421.480275,"
            "1682900.37074 5403459.87246,"
            "1682942.762625 5403465.171382,"
            "1682975.012122 5403470.810234,"
            "1683049.26595 5403469.290543,"
            "1683114.432858 5403443.535786,"
            "1683203.842547 5403370.790593,"
            "1683279.613611 5403273.800335,"
            "1683328.107421 5403210.15329,"
            "1683356.901909 5403151.045321,"
            "1683353.875684 5403104.074882,"
            "1683331.141892 5403043.457221,"
            "1683309.925334 5402970.712028,"
            "1683311.44257 5402916.263111,"
            "1683346.297753 5402870.692386,"
            "1683408.43019 5402805.525651,"
            "1683487.235724 5402746.42768,"
            "1683575.128178 5402690.349095,"
            "1683641.804075 5402647.917731,"
            "1683706.970983 5402616.094209,"
            "1683741.826167 5402610.035442,"
            "1683781.26604 5402615.764276,"
            "1683816.261403 5402623.462709,"
            "1683915.838219 5402676.741864,"
            "1684000 5402711.41802501,"
            "1684020.618162 5402719.913077,"
            "1684068.00703 5402732.710472,"
            "1684222.971181 5402746.287709,"
            "1684311.424353 5402765.24385,"
            "1684450.572976 5402802.756215,"
            "1684578.837084 5402854.785624,"
            "1684651.433497 5402882.619959,"
            "1684708.305085 5402894.717496,"
            "1684763.964534 5402883.829712,"
            "1684819.632229 5402849.946609,"
            "1684837.781332 5402820.902521,"
            "1684835.357054 5402777.341388,"
            "1684817.207951 5402736.199762,"
            "1684749.451848 5402674.492322,"
            "1684704.676914 5402623.672666,"
            "1684682.899639 5402545.018676,"
            "1684682.899639 5402476.052714,"
            "1684692.58026 5402430.072073,"
            "1684739.771227 5402376.822912,"
            "1684837.781332 5402305.437442,"
            "1684921.270506 5402277.603108,"
            "1684981.770265 5402275.1836,"
            "1685015.652439 5402295.759412,"
            "1685031.38551 5402317.53498,"
            "1685032.589404 5402344.159561,"
            "1685010.812129 5402370.774143,"
            "1684991.450886 5402409.496261,"
            "1684989.026608 5402463.955177,"
            "1684972.089644 5402600.687345,"
            "1684985.398437 5402732.580499,"
            "1684986.610576 5402973.371486,"
            "1684959.984745 5403060.493753,"
            "1684920.058367 5403131.88922,"
            "1684881.335882 5403191.177153,"
            "1684863.186778 5403244.416316,"
            "1684864.398918 5403295.235972,"
            "1684898.281092 5403346.055628,"
            "1684949.10023 5403360.582671,"
            "1684989.991372 5403370.170719,"
            "1685072.524028 5403369.050947,"
            "1685162.065651 5403366.631439,"
            "1685254.023306 5403340.006859,"
            "1685345.989208 5403307.333509,"
            "1685395.596207 5403272.25065,"
            "1685445.211452 5403216.581982,"
            "1685470.616898 5403177.869861,"
            "1685479.085381 5403110.103655,"
            "1685482.045639 5403068.682086,"
            "1685463.360556 5403033.869172,"
            "1685454.883828 5402967.322718,"
            "1685471.829038 5402909.244539,"
            "1685532.328797 5402824.54178,"
            "1685646.071973 5402744.678036,"
            "1685708.996011 5402691.438873,"
            "1685723.508697 5402658.765523,"
            "1685736.825736 5402615.20439,"
            "1685746.506357 5402540.189659,"
            "1685759.81515 5402501.467541,"
            "1685788.857013 5402491.789511,"
            "1685819.10277 5402497.83828,"
            "1685850.568912 5402523.243109,"
            "1685873.558326 5402570.433503,"
            "1685896.54774 5402610.355377,"
            "1685964.303842 5402718.053456,"
            "1686003.026327 5402812.434245,"
            "1686041.748812 5402911.654049,"
            "1686076.843125 5402947.956659,"
            "1686111.929193 5402947.956659,"
            "1686147.023506 5402931.010109,"
            "1686182.109574 5402901.976019,"
            "1686202.682955 5402819.692767,"
            "1686214.779609 5402689.009367,"
            "1686209.939298 5402592.209071,"
            "1686193.002334 5402489.360005,"
            "1686178.481402 5402415.54503,"
            "1686177.269263 5402357.466852,"
            "1686222.044197 5402317.53498,"
            "1686324.894613 5402263.086063,"
            "1686418.064408 5402230.412713,"
            "1686484.616617 5402243.720005,"
            "1686519.710931 5402271.554339,"
            "1686541.488206 5402312.695965,"
            "1686559.637309 5402416.754784,"
            "1686598.359794 5402483.311237,"
            "1686663.699864 5402560.745475,"
            "1686704.838381 5402610.355377,"
            "1686724.199623 5402659.965279,"
            "1686748.401176 5402754.356066,"
            "1686777.44304 5402892.297989,"
            "1686816.165525 5402980.630009,"
            "1686864.560385 5403039.917941,"
            "1686942.005355 5403090.737597,"
            "1687020.654218 5403104.054886,"
            "1687121.088601 5403129.459715,"
            "1687190.056843 5403153.664788,"
            "1687232.440482 5403171.661125,"
            "1687258.83543 5403191.157157,"
            "1687296.032434 5403231.338978,"
            "1687323.334424 5403271.630776,"
            "1687350.331318 5403336.817508,"
            "1687355.138646 5403374.309876,"
            "1687354.940745 5403406.803263,"
            "1687349.539717 5403432.697992,"
            "1687329.213711 5403462.211984,"
            "1687315.904918 5403514.241394,"
            "1687305.012158 5403550.544005,"
            "1687302.868239 5403577.968422,"
            "1687302.58788 5403647.344301,"
            "1687337.682193 5403723.578784,"
            "1687378.82071 5403747.773859,"
            "1687485.299298 5403757.461887,"
            "1687540.966993 5403757.461887,"
            "1687609.935234 5403746.564105,"
            "1687666.509972 5403770.889154,"
            "1687709.800655 5403791.874882,"
            "1687749.595099 5403819.559247,"
            "1687766.993831 5403837.255645,"
            "1687789.191643 5403882.346467,"
            "1687788.993743 5403907.341379,"
            "1687781.30037 5403937.335274,"
            "1687766.103279 5403964.729698,"
            "1687735.915243 5403994.523634,"
            "1687698.231735 5404019.328585,"
            "1687665.635913 5404034.025593,"
            "1687635.645777 5404041.324108,"
            "1687597.558222 5404039.734431,"
            "1687563.065855 5404038.334716,"
            "1687503.176288 5404027.946831,"
            "1687339.207674 5403984.07576,"
            "1687303.42071 5403984.07576,"
            "1687268.425347 5403991.384273,"
            "1687241.733549 5404002.382034,"
            "1687194.897153 5404036.974993,"
            "1687157.386808 5404074.487357,"
            "1687138.025565 5404115.628983,"
            "1687142.865876 5404156.770609,"
            "1687175.535911 5404259.619674,"
            "1687225.14291 5404338.273664,"
            "1687369.140089 5404431.4447,"
            "1687438.108331 5404471.376572,"
            "1687479.246848 5404489.522878,"
            "1687531.888318 5404490.732632,"
            "1687547.802798 5404451.100699,"
            "1687563.304985 5404415.957852,"
            "1687535.508244 5404415.757893,"
            "1687520.517299 5404420.656896,"
            "1687488.020426 5404417.967443,"
            "1687440.631559 5404400.071086,"
            "1687393.242692 5404374.786232,"
            "1687306.15833 5404316.708054,"
            "1687273.859358 5404283.914729,"
            "1687256.559577 5404251.321363,"
            "1687221.861064 5404213.539054,"
            "1687212.254656 5404148.452302,"
            "1687219.956274 5404128.556352,"
            "1687250.14431 5404101.261907,"
            "1687282.731887 5404083.95543,"
            "1687317.8262 5404074.157425,"
            "1687360.317036 5404071.957872,"
            "1687385.31019 5404077.146816,"
            "1687462.697439 5404102.731608,"
            "1687512.683747 5404103.031547,"
            "1687550.169355 5404095.823015,"
            "1687628.084338 5404107.160707,"
            "1687687.743021 5404083.215581,"
            "1687762.219487 5404046.013153,"
            "1687805.402973 5404008.720744,"
            "1687854.358551 5403919.598884,"
            "1687851.934273 5403865.149967,"
            "1687851.934273 5403840.944894,"
            "1687834.997309 5403804.652281,"
            "1687819.264238 5403765.930163,"
            "1687790.271849 5403734.876484,"
            "1687732.987969 5403696.994195,"
            "1687695.593065 5403681.697309,"
            "1687658.099211 5403673.908894,"
            "1687625.610584 5403673.708935,"
            "1687580.621258 5403678.417976,"
            "1687512.939368 5403697.914008,"
            "1687467.950041 5403697.624067,"
            "1687447.953869 5403692.525105,"
            "1687410.558965 5403672.239234,"
            "1687393.259184 5403649.643833,"
            "1687380.956384 5403612.051485,"
            "1687380.420404 5403608.582191,"
            "1687367.92795 5403548.124497,"
            "1687370.352228 5403520.290163,"
            "1687389.738208 5403461.882051,"
            "1687404.737399 5403458.482743,"
            "1687417.229853 5403434.787566,"
            "1687417.518458 5403387.297233,"
            "1687430.316008 5403344.805882,"
            "1687430.711809 5403292.316566,"
            "1687420.9075 5403262.222691,"
            "1687406.106209 5403237.127799,"
            "1687366.311765 5403194.346507,"
            "1687339.01802 5403174.150618,"
            "1687244.33099 5403120.971443,"
            "1687211.941314 5403108.284025,"
            "1687167.042691 5403080.489683,"
            "1687108.860014 5403058.404178,"
            "1687067.366926 5403044.806946,"
            "1687056.465919 5403042.517412,"
            "1686997.664804 5403038.708187,"
            "1686939.581076 5403022.981388,"
            "1686857.304042 5402935.859122,"
            "1686793.176111 5402754.356066,"
            "1686775.018762 5402684.170352,"
            "1686745.985144 5402628.511682,"
            "1686720.571452 5402588.57981,"
            "1686652.807104 5402515.974588,"
            "1686611.668586 5402447.008626,"
            "1686585.051001 5402405.867,"
            "1686575.37038 5402357.466852,"
            "1686563.26548 5402299.388674,"
            "1686537.860034 5402250.988525,"
            "1686499.137549 5402218.315176,"
            "1686427.745029 5402205.007884,"
            "1686361.19282 5402213.476161,"
            "1686295.85275 5402249.768774,"
            "1686220.832058 5402293.329907,"
            "1686173.641091 5402324.793502,"
            "1686154.279849 5402369.564389,"
            "1686154.279849 5402424.013307,"
            "1686182.109574 5402528.082124,"
            "1686189.374162 5402658.755525,"
            "1686189.374162 5402799.126953,"
            "1686160.332299 5402897.137004,"
            "1686125.237985 5402923.751586,"
            "1686081.683436 5402923.751586,"
            "1686046.589123 5402881.400207,"
            "1686009.078777 5402770.082865,"
            "1685950.99505 5402647.867742,"
            "1685913.484704 5402586.160302,"
            "1685859.037394 5402499.048033,"
            "1685819.10277 5402477.262468,"
            "1685802.165806 5402472.423453,"
            "1685768.283632 5402472.423453,"
            "1685734.401458 5402491.789511,"
            "1685727.145115 5402524.452862,"
            "1685717.464493 5402605.52636,"
            "1685693.26294 5402678.131582,"
            "1685585.572214 5402755.56582,"
            "1685504.499073 5402820.912519,"
            "1685460.936277 5402880.200451,"
            "1685433.106553 5402935.859122,"
            "1685431.894414 5402993.947298,"
            "1685460.936277 5403084.698826,"
            "1685460.936277 5403142.777004,"
            "1685408.905 5403229.899271,"
            "1685337.51248 5403281.92868,"
            "1685229.821753 5403319.441045,"
            "1685108.822234 5403347.265381,"
            "1685005.971818 5403344.845874,"
            "1684916.430195 5403326.699567,"
            "1684889.804364 5403294.026218,"
            "1684899.484985 5403226.27001,"
            "1684946.675952 5403143.986758,"
            "1684981.770265 5403067.752275,"
            "1685003.54754 5402989.098285,"
            "1685019.280611 5402887.458974,"
            "1685015.652439 5402772.512371,"
            "1685007.175712 5402592.219069,"
            "1685019.280611 5402466.374684,"
            "1685031.38551 5402392.559709,"
            "1685042.270025 5402371.983897,"
            "1685054.374924 5402341.740053,"
            "1685054.374924 5402318.744734,"
            "1685045.906442 5402289.710643,"
            "1685007.183957 5402259.456802,"
            "1684949.10023 5402241.300497,"
            "1684875.291678 5402258.247048,"
            "1684795.430676 5402294.549659,"
            "1684711.941502 5402363.515621,"
            "1684667.166568 5402415.54503,"
            "1684650.229604 5402485.730744,"
            "1684663.538396 5402594.628578,"
            "1684697.420571 5402662.394785,"
            "1684771.229123 5402726.521732,"
            "1684808.739469 5402774.92188,"
            "1684812.36764 5402816.063506,"
            "1684780.909744 5402851.156363,"
            "1684740.97512 5402870.512423,"
            "1684690.155982 5402868.092915,"
            "1684630.868361 5402843.89784,"
            "1684517.61169 5402795.847621,"
            "1684435.32641 5402765.263846,"
            "1684290.578859 5402730.590904,"
            "1684228.067113 5402721.292796,"
            "1684133.289379 5402698.207495,"
            "1684030.810026 5402682.520688,"
            "1684000.000000 5402672.31399816))"
          );

    std::unique_ptr<Geometry> result = algorithm::straightSkeleton( *g );

    std::cout << g->asText() << std::endl;
}

BOOST_AUTO_TEST_CASE(testIssue96_fracform)
{
    std::unique_ptr<Geometry> g = io::readWkt("POLYGON((1684000/1 67533403924977/12500000,1683946034501/1000000 1080530887281/200000,336778248173/200000 67532831901/12500,1683828852807/1000000 5402603566759/1000000,1683763966259/1000000 5402588179891/1000000,841855002727/500000 1080518673767/200000,1683643321311/1000000 54026176139/10000,1683558455081/1000000 135066690593/25000,1683479657793/1000000 1350680923077/250000,210424159291/125000 5402782790279/1000000,841672390259/500000 5402828261023/1000000,1683302347403/1000000 675359972567/125000,33665501403/20000 5402920702207/1000000,33665501403/20000 135074040347/25000,841642837153/500000 5403005564933/1000000,1683312951559/1000000 1350765030957/250000,420831270299/250000 1080621420853/200000,3366638041/2000 5403163172853/1000000,841645867501/500000 5403213182673/1000000,1683214454949/1000000 2701658115849/500000,1683131097709/1000000 2701702066903/500000,1683071999743/1000000 675429873339/125000,841492808139/500000 5403446565169/1000000,336588092407/200000 5403442675961/1000000,1682880415797/1000000 675428586101/125000,1682817343333/1000000 5403380938527/1000000,42069352347/25000 675415183829/125000,168272994563/100000 5403243986403/1000000,33653842109/20000 1350789820911/250000,1682682878351/1000000 2701540394811/500000,168268067671/100000 5403039198087/1000000,67306170281/40000 1350741390769/250000,420657219079/250000 5402937928701/1000000,841304489547/500000 5402917832791/1000000,1682537124807/1000000 1350720667487/250000,841188610697/500000 216112147441/40000,841163716493/500000 2701389195587/500000,1682247745147/1000000 1350680078249/250000,841112674717/500000 5402712624561/1000000,84109175501/50000 5402714684141/1000000,52567059913/31250 84417616899/15625,1682113964569/1000000 675342581107/125000,841044992827/500000 2701382112029/500000,1682069700877/1000000 5402801616447/1000000,336410341689/200000 5402871502221/1000000,841002312337/500000 5402975481057/1000000,336394070989/200000 2701532986319/500000,1681952560413/1000000 5403113362991/1000000,210241004659/125000 1350792975269/250000,420480207601/250000 5403207043923/1000000,1681928936069/1000000 337703030343/62500,1681963684057/1000000 5403315911763/1000000,1681985700461/1000000 5403387247243/1000000,1681982097027/1000000 5403427788991/1000000,336394539353/200000 270172679187/50000,336391999633/200000 5403485977147/1000000,840958559887/500000 2701771582753/500000,1681871734647/1000000 5403590355901/1000000,840900678183/500000 5403642355317/1000000,1681698275067/1000000 5403702603053/1000000,210203338673/125000 5403743754677/1000000,168156582207/100000 1350940745191/250000,1681486530031/1000000 5403783696547/1000000,1681395528893/1000000 2701897707081/500000,168130813119/100000 1080758902869/200000,336256226859/200000 675475985203/125000,1681309029987/1000000 675476791289/125000,1681347777209/1000000 1350955384711/250000,840721640289/500000 2701906265339/500000,840767594379/500000 2701899956623/500000,210203499467/125000 2701884639741/500000,1681693294577/1000000 5403734146633/1000000,336348695757/200000 5403709551639/1000000,1681819010719/1000000 2701829231019/500000,1681882981979/1000000 2701803546247/500000,1681939746371/1000000 1350888933237/250000,210246072761/125000 6754393989/1250,420498002133/250000 5403477348903/1000000,1682001920037/1000000 5403427788991/1000000,1682003725877/1000000 337710689409/62500,840990590869/500000 5403316111723/1000000,1681950564919/1000000 540324218677/100000,336389392297/200000 5403179109609/1000000,1682053819381/1000000 5402931490011/1000000,336414941221/200000 5402867003137/1000000,841043500329/500000 540282921083/100000,420527470719/250000 1080555864197/200000,168213247649/100000 2701379762507/500000,1682162573821/1000000 1350686179507/250000,1682197659889/1000000 84417850289/15625,1682230057811/1000000 13506881791/2500,1682274948187/1000000 2701387750881/500000,1682361422357/1000000 1080565002337/200000,1682456810283/1000000 1080572852739/200000,210320498721/125000 1350729383213/250000,420650946053/250000 1080589045443/200000,336527276007/200000 5402982409647/1000000,1682648855997/1000000 2701518374293/500000,1682663269733/1000000 67539434807/12500,336538879559/200000 2701614224783/500000,1682727240993/1000000 2701643613801/500000,168275607671/100000 1350835324149/250000,33655842221/20000 270169407353/50000,52588464321/31250 216136859211/40000,84145018537/50000 270172993623/50000,13463542101/8000 2701732585691/500000,841487506061/500000 2701735405117/500000,33660985319/20000 5403469290543/1000000,841557216429/500000 2701721767893/500000,1683203842547/1000000 5403370790593/1000000,1683279613611/1000000 1080654760067/200000,1683328107421/1000000 540321015329/100000,1683356901909/1000000 5403151045321/1000000,420838468921/250000 2701552037441/500000,420832785473/250000 5403043457221/1000000,841654962667/500000 1350742678007/250000,168331144257/100000 5402916263111/1000000,1683346297753/1000000 2701435346193/500000,168340843019/100000 5402805525651/1000000,420871808931/250000 33767165173/6250,841787564089/500000 1080538069819/200000,67345672163/40000 5402647917731/1000000,1683706970983/1000000 5402616094209/1000000,1683741826167/1000000 2701305017721/500000,42094531651/25000 1350653941069/250000,1683816261403/1000000 5402623462709/1000000,1683915838219/1000000 675334592733/125000,1684000/1 540271141802501/100000000,842010309081/500000 5402719913077/1000000,168406800703/100000 675341588809/125000,1684222971181/1000000 5402746287709/1000000,1684311424353/1000000 108055304877/20000,105278160811/62500 1080560551243/200000,421144709271/250000 675356848203/125000,1684651433497/1000000 5402882619959/1000000,336941661017/200000 675361839687/125000,842381982267/500000 337680239357/62500,1684819632229/1000000 5402849946609/1000000,421209445333/250000 5402820902521/1000000,842417678527/500000 1350694335347/250000,1684817207951/1000000 2701368099881/500000,210593681481/125000 2701337246161/500000,842352338457/500000 2701311836333/500000,1684682899639/1000000 1350636254669/250000,1684682899639/1000000 2701238026357/500000,84234629013/50000 5402430072073/1000000,1684739771227/1000000 84412137858/15625,421209445333/250000 2701152718721/500000,842460635253/500000 1350569400777/250000,336996354053/200000 13505687959/2500,1685015652439/1000000 1350573939853/250000,168503138551/100000 270115876749/50000,421258147351/250000 5402344159561/1000000,1685010812129/1000000 5402370774143/1000000,842495725443/500000 5402409496261/1000000,105311814163/62500 5402463955177/1000000,421243022411/250000 1080520137469/200000,1684985398437/1000000 5402732580499/1000000,105311663161/62500 2701486685743/500000,336991996949/200000 5403060493753/1000000,1684920058367/1000000 270156594461/50000,842440667941/500000 5403191177153/1000000,842431593389/500000 1350811104079/250000,842432199459/500000 1350823808993/250000,421224570273/250000 1350836513907/250000,168494910023/100000 5403360582671/1000000,421247497843/250000 5403370170719/1000000,421268131007/250000 5403369050947/1000000,1685162065651/1000000 5403366631439/1000000,842627011653/500000 5403340006859/1000000,210668248651/125000 5403307333509/1000000,1685395596207/1000000 108065445013/20000,421361302863/250000 2701608290991/500000,842735308449/500000 5403177869861/1000000,1685479085381/1000000 1080622020731/200000,1685482045639/1000000 2701534341043/500000,421365840139/250000 1350758467293/250000,421363720957/250000 2701483661359/500000,842735914519/500000 5402909244539/1000000,1685532328797/1000000 270141227089/50000,1685646071973/1000000 1350686169509/250000,1685708996011/1000000 5402691438873/1000000,1685723508697/1000000 5402658765523/1000000,210717103217/125000 540261520439/100000,1685746506357/1000000 5402540189659/1000000,33715196303/20000 5402501467541/1000000,1685788857013/1000000 5402491789511/1000000,168581910277/100000 135062445957/25000,105365660557/62500 5402523243109/1000000,842936779163/500000 5402570433503/1000000,84294827387/50000 5402610355377/1000000,842982151921/500000 337669878341/62500,1686003026327/1000000 1080562486849/200000,421510437203/250000 5402911654049/1000000,2697722949/1600 5402947956659/1000000,1686111929193/1000000 5402947956659/1000000,843073511753/500000 5402931010109/1000000,843091054787/500000 5402901976019/1000000,337240536591/200000 5402819692767/1000000,1686214779609/1000000 5402689009367/1000000,843104969649/500000 5402592209071/1000000,843096501167/500000 1080497872001/200000,843089240701/500000 540241554503/100000,1686177269263/1000000 1350589366713/250000,1686222044197/1000000 270115876749/50000,1686324894613/1000000 5402263086063/1000000,210802258051/125000 5402230412713/1000000,1686484616617/1000000 1080448744001/200000,1686519710931/1000000 5402271554339/1000000,843270744103/500000 1080462539193/200000,1686559637309/1000000 168825523587/31250,843299179897/500000 5402483311237/1000000,210832962483/125000 216102429819/40000,1686704838381/1000000 5402610355377/1000000,1686724199623/1000000 5402659965279/1000000,210843550147/125000 2701377178033/500000,10542359019/6250 5402892297989/1000000,67472646621/40000 5402980630009/1000000,337372912077/200000 5403039917941/1000000,337388401071/200000 5403090737597/1000000,843510327109/500000 2701552027443/500000,1687121088601/1000000 1080625891943/200000,1687190056843/1000000 1350788416197/250000,843616220241/500000 43225373289/8000,168725883543/100000 5403191157157/1000000,843648016217/500000 2701615669489/500000,210915416803/125000 675408953847/125000,843675165659/500000 1350834204377/250000,843677569323/500000 1350843577469/250000,337470988149/200000 5403406803263/1000000,1687349539717/1000000 675429087249/125000,1687329213711/1000000 337716388249/62500,843657952459/500000 2701757120697/500000,843652506079/500000 1080710108801/200000,1687302868239/1000000 2701788984211/500000,42182564697/25000 5403647344301/1000000,1687337682193/1000000 168866361837/31250,168737882071/100000 5403747773859/1000000,843742649649/500000 5403757461887/1000000,1687540966993/1000000 5403757461887/1000000,843804967617/500000 1080749312821/200000,421916627493/250000 2701885444577/500000,337541960131/200000 2701895937441/500000,1687749595099/1000000 5403819559247/1000000,1687766993831/1000000 1080767451129/200000,1687789191643/1000000 5403882346467/1000000,1687788993743/1000000 5403907341379/1000000,168778130037/100000 2701968667637/500000,1687766103279/1000000 2701982364849/500000,1687735915243/1000000 2701997261817/500000,337539646347/200000 1080803865717/200000,1687665635913/1000000 5404034025593/1000000,1687635645777/1000000 1351010331027/250000,843798779111/500000 5404039734431/1000000,337512613171/200000 1351009583679/250000,52734474259/31250 5404027946831/1000000,843669603837/500000 67549800947/12500,168730342071/100000 67549800947/12500,1687268425347/1000000 5403991384273/1000000,1687241733549/1000000 2702001191017/500000,1687194897153/1000000 5404036974993/1000000,210894673351/125000 5404074487357/1000000,337427605113/200000 5404115628983/1000000,421785716469/250000 5404156770609/1000000,1687175535911/1000000 2702129809837/500000,168722514291/100000 84442785526/15625,1687369140089/1000000 54044314447/10000,1687438108331/1000000 1351117844143/250000,26366863232/15625 2702244761439/500000,843765944159/500000 675561341579/125000,843773901399/500000 5404451100699/1000000,337512660997/200000 1351103989463/250000,421883877061/250000 5404415757893/1000000,1687520517299/1000000 84444072764/15625,843744010213/500000 5404417967443/1000000,1687440631559/1000000 2702200035543/500000,421848310673/250000 675546848279/125000,168730615833/100000 2702158354027/500000,843636929679/500000 5404283914729/1000000,1687256559577/1000000 5404251321363/1000000,210902732633/125000 2702106769527/500000,26362691479/15625 2702074226151/500000,843609978137/500000 84439508693/15625,168725014431/100000 5404101261907/1000000,1687282731887/1000000 540408395543/100000,8436589131/5000 216162966297/40000,421840079259/250000 337754497367/62500,168738531019/100000 84438705419/15625,1687462697439/1000000 675512841451/125000,1687512683747/1000000 5404103031547/1000000,337510033871/200000 1080819164603/200000,843814042169/500000 5404107160707/1000000,1687687743021/1000000 5404083215581/1000000,1687762219487/1000000 5404046013153/1000000,1687805402973/1000000 675501090093/125000,1687854358551/1000000 1350979899721/250000,1687851934273/1000000 5403865149967/1000000,1687851934273/1000000 2701920472447/500000,1687834997309/1000000 5403804652281/1000000,843909632119/500000 5403765930163/1000000,1687790271849/1000000 1350933719121/250000,1687732987969/1000000 1080739398839/200000,337539118613/200000 5403681697309/1000000,1687658099211/1000000 2701836954447/500000,210953201323/125000 1080734741787/200000,843790310629/500000 675459802247/125000,210939117421/125000 675462239251/125000,1687467950041/1000000 5403697624067/1000000,1687447953869/1000000 1080738505021/200000,337482111793/200000 2701836119617/500000,105462078699/62500 5403649643833/1000000,52730654887/31250 1080722410297/200000,421845105101/250000 5403608582191/1000000,33747358559/20000 5403548124497/1000000,421842588057/250000 5403520290163/1000000,52730929319/31250 5403461882051/1000000,1687404737399/1000000 5403458482743/1000000,1687417229853/1000000 2701717393783/500000,843708759229/500000 5403387297233/1000000,210928789501/125000 2701672402941/500000,1687430711809/1000000 2701646158283/500000,674968363/400 5403262222691/1000000,1687406106209/1000000 5403237127799/1000000,337473262353/200000 5403194346507/1000000,84366950901/50000 2701587075309/500000,168724433099/100000 5403120971443/1000000,843605970657/500000 216124331361/40000,1687167042691/1000000 5403080489683/1000000,843554430007/500000 2701529202089/500000,843533683463/500000 2701522403473/500000,1687056465919/1000000 1350760629353/250000,421749416201/250000 5403038708187/1000000,421734895269/250000 1350755745347/250000,843428652021/500000 2701467929561/500000,1686793176111/1000000 2701377178033/500000,843387509381/500000 337667760647/62500,210843248143/125000 2701314255841/500000,421680142863/250000 540258857981/100000,26353950111/15625 1350628993647/250000,843305834293/500000 2701223504313/500000,1686585051001/1000000 5402405867/1000,84328768519/50000 1350589366713/250000,42164081637/25000 2701149694337/500000,843268930017/500000 216090039541/40000,1686499137549/1000000 675277289397/125000,1686427745029/1000000 1350551251971/250000,84318059641/50000 5402213476161/1000000,6745183411/4000 2701124884387/500000,843110416029/500000 5402293329907/1000000,1686173641091/1000000 2701162396751/500000,1686154279849/1000000 5402369564389/1000000,1686154279849/1000000 5402424013307/1000000,843091054787/500000 1350632020531/250000,843094687081/500000 216106350221/40000,843094687081/500000 5402799126953/1000000,1686160332299/1000000 1350724284251/250000,337225047597/200000 2701461875793/500000,421520420859/250000 2701461875793/500000,1686046589123/1000000 5402881400207/1000000,1686009078777/1000000 1080554016573/200000,33719019901/20000 2701323933871/500000,52684796397/31250 2701293080151/500000,842929518697/500000 5402499048033/1000000,168581910277/100000 1350619315617/250000,842901082903/500000 5402472423453/1000000,105360517727/62500 5402472423453/1000000,842867200729/500000 5402491789511/1000000,337145429023/200000 2701262226431/500000,1685717464493/1000000 135065138159/25000,84284663147/50000 2701339065791/500000,842792786107/500000 270137778291/50000,1685504499073/1000000 5402820912519/1000000,1685460936277/1000000 5402880200451/1000000,1685433106553/1000000 2701467929561/500000,842715947207/500000 2701496973649/500000,1685460936277/1000000 2701542349413/500000,1685460936277/1000000 1350785694251/250000,337081781/200 5403229899271/1000000,10533359453/6250 135082048217/25000,1685229821753/1000000 1080663888209/200000,842554411117/500000 5403347265381/1000000,842502985909/500000 2701672422937/500000,336983286039/200000 5403326699567/1000000,421222451091/250000 2701647013109/500000,336979896997/200000 540322627001/100000,105309167247/62500 2701571993379/500000,336996354053/200000 216122710091/40000,84250177377/50000 1080597819657/200000,1685019280611/1000000 2701443729487/500000,1685015652439/1000000 5402772512371/1000000,52656474241/31250 5402592219069/1000000,1685019280611/1000000 1350616593671/250000,168503138551/100000 5402392559709/1000000,67401690801/40000 5402371983897/1000000,421263593731/250000 5402341740053/1000000,421263593731/250000 2701159372367/500000,842522953221/500000 5402289710643/1000000,1685007183957/1000000 2701129728401/500000,168494910023/100000 5402241300497/1000000,842437645839/500000 675282280881/125000,421198857669/250000 5402294549659/1000000,842355970751/500000 5402363515621/1000000,210583395821/125000 540241554503/100000,421162557401/250000 675310716343/125000,421165884599/250000 2701297314289/500000,1684697420571/1000000 1080532478957/200000,1684771229123/1000000 1350681630433/250000,1684808739469/1000000 135069373047/25000,42120309191/25000 2701408031753/500000,105298806859/62500 5402851156363/1000000,21059262189/12500 5402870512423/1000000,842345077991/500000 1080573618583/200000,1684630868361/1000000 67535548723/12500,168451761169/100000 5402795847621/1000000,168443532641/100000 2701382631923/500000,1684290578859/1000000 675341323863/125000,1684228067113/1000000 1350680323199/250000,1684133289379/1000000 1080539641499/200000,842015405013/500000 337667657543/62500,1684000/1 67533403924977/12500000))");

    std::unique_ptr<Geometry> ss = algorithm::straightSkeleton(*g);

    std::cout << ss->asText() << std::endl;
}

BOOST_AUTO_TEST_SUITE_END()

